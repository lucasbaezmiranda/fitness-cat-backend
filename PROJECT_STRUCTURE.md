# Project Structure

## Overview

This is a Kotlin Android application for tracking steps and syncing to AWS DynamoDB.

## Directory Structure

```
fitness-cat-backend/
├── app/                              # Android app module
│   ├── build.gradle                  # App-level Gradle configuration
│   ├── proguard-rules.pro            # ProGuard rules for code obfuscation
│   └── src/main/
│       ├── AndroidManifest.xml       # App manifest (permissions, activities)
│       ├── assets/
│       │   └── aws_config.properties.template  # AWS credentials template
│       ├── java/com/fitnesscat/stepstracker/
│       │   ├── MainActivity.kt       # Main UI activity
│       │   ├── StepCounter.kt        # Step tracking logic (SensorManager)
│       │   ├── DynamoDBHelper.kt     # AWS DynamoDB integration
│       │   ├── StepRecord.kt         # Data model for step records
│       │   └── UserPreferences.kt    # Local storage helper
│       └── res/                      # Android resources
│           ├── layout/
│           │   └── activity_main.xml # Main UI layout
│           ├── values/
│           │   ├── strings.xml       # String resources
│           │   ├── colors.xml        # Color definitions
│           │   └── themes.xml        # App theme
│           └── mipmap/               # App icons (generated by Android Studio)
│
├── build.gradle                      # Project-level Gradle configuration
├── settings.gradle                   # Gradle settings
├── gradle.properties                 # Gradle properties
├── .gitignore                        # Git ignore rules
├── README.md                         # Full documentation
├── QUICKSTART.md                     # Quick start guide
├── PROJECT_STRUCTURE.md              # This file
└── dynamodb_setup.py                 # Python script to create DynamoDB table
```

## Key Components

### MainActivity.kt
- Main entry point of the app
- Manages UI updates
- Handles permissions
- Coordinates step tracking and cloud sync

### StepCounter.kt
- Wraps Android SensorManager
- Listens to TYPE_STEP_COUNTER sensor
- Handles sensor offset calculation for accurate daily counts
- Persists step count to SharedPreferences

### DynamoDBHelper.kt
- Manages AWS DynamoDB client
- Loads credentials from assets/aws_config.properties
- Saves StepRecord items to DynamoDB
- Includes StepRecordItem class for DynamoDB mapping

### StepRecord.kt
- Data class representing a step record
- Contains: userId, steps, timestamp, date

### UserPreferences.kt
- Manages SharedPreferences
- Stores: user ID, last sync timestamp, step count, sensor offset
- Generates unique user IDs

## Data Flow

1. **App Opens** → MainActivity.onCreate()
2. **Step Tracking** → StepCounter listens to sensor
3. **Step Count Updates** → UI updates via callback
4. **User Taps Sync** → MainActivity.syncToDynamoDB()
5. **DynamoDBHelper** → Creates StepRecord → Saves to DynamoDB
6. **Success** → Updates last sync timestamp in preferences

## DynamoDB Schema

**Table: StepRecords**

| Attribute   | Type   | Key Type        | Description                    |
|------------|--------|-----------------|--------------------------------|
| userId      | String | Partition Key   | Unique user identifier         |
| timestamp   | Number | Sort Key        | Unix timestamp (milliseconds)  |
| steps       | Number | Attribute       | Step count at that time        |
| date        | String | Attribute       | ISO date (YYYY-MM-DD)          |

## Dependencies

- AndroidX Core KTX
- Material Components
- AWS Android SDK (DynamoDB, DynamoDB Mapper)
- Kotlin Coroutines
- Android Lifecycle Runtime

## Next Steps for Learning Kotlin

1. **Data Classes**: Study `StepRecord.kt` - see how `data class` automatically generates useful methods
2. **Null Safety**: Notice `?.` and `?:` operators in `DynamoDBHelper.kt`
3. **Coroutines**: See `lifecycleScope.launch` in `MainActivity.kt` for async operations
4. **Extension Functions**: Android provides many (like `context.getSharedPreferences`)
5. **Lambda Expressions**: See `stepCounter.onStepCountChanged = { count -> ... }`
6. **Property Delegates**: `lateinit var` for properties initialized later
7. **Companion Objects**: Static-like members (see constants in `UserPreferences`)

## Files You Need to Create/Configure

1. **aws_config.properties** (copy from template and fill in credentials)
2. **App icons** (Android Studio will generate these automatically)
3. **Gradle wrapper** (Android Studio generates this automatically)





